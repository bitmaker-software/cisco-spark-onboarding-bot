extends layout

block content
  div#root
    div.text-center.p-4
      h1.text-center.mb-4.mt-4 !{title} Dashboard
      p.text-muted.mt-4 Main Statistics collect for this flow
    div.card-deck.mt-4
      div.card.card-outline-primary.text-center
        div.card-block
          h5.card-title Total Users
          p.card-subtitle.mb-2.text-muted Number of users whose flow was sent
          h5.card-text {{totalUsers}}
      div.card.card-outline-primary.text-center
        div.card-block
          h5.card-title Average time
          p.card-subtitle.mb-2.text-muted Average time an user takes to answer the flow
          h5.card-text !{avgTime}
      div.card.card-outline-primary.text-center
        div.card-block
          h5.card-title Minimum time
          p.card-subtitle.mb-2.text-muted Least amount of time taken to answer the flow
          h5.card-text !{minTime}
      div.card.card-outline-primary.text-center
        div.card-block
          h5.card-title Maximum time
          p.card-subtitle.mb-2.text-muted ⁠⁠⁠Maximum amount of time taken to answer the flow
          h5.card-text !{maxTime}
    div.row.mt-5
      div.col-5#containerU(style={width:'100%',height:'300px'})
      div.col-7#containerQ(style={width:'100%',height:'300px'})

block pageScripts
  script.
    var usersArray = !{JSON.stringify(usersArray).replace(/<\//g, '<\\/')};
    var sumUsers = 0;
    usersArray.forEach(function (element) {
      sumUsers += parseInt(element.count);
      element.y = parseInt(element.count);
    });

    var answersArrayData = !{JSON.stringify(answersArray).replace(/<\//g, '<\\/')};
    var answersArray = [{
      name: "Questions",
      colorByPoint: true,
      data: answersArrayData
    }];

    console.log(answersArrayData);

    var stepChoiceArray = !{JSON.stringify(stepChoiceArray).replace(/<\//g, '<\\/')};


  script(src=static.root + '/js/manager_flow_dashboard.js')